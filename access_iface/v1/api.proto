syntax = "proto3";
package access_iface.v1;

import "buf/validate/validate.proto";
// import "common/v1/common.proto";

option go_package = "github.com/pdcgo/schema/services/access_iface/v1;access_iface";

enum RequestFrom {
  REQUEST_FROM_UNSPECIFIED = 0;
  REQUEST_FROM_SELLING = 1;
  REQUEST_FROM_ADMIN = 2;
  REQUEST_FROM_WAREHOUSE = 3;
  REQUEST_FROM_SYSTEM = 4;
}

message Stack {
  string path = 1;
  string service_name = 2;
}

message StackSource {
  repeated Stack stacks = 1;
}

message RequestSource {
  uint64 team_id = 1 [(buf.validate.field).uint64.gt = 0];
  RequestFrom request_from = 2 [(buf.validate.field).enum = {
    defined_only: true
    not_in: [0]
  }];
}

message ResourceScope {
  uint64 team_id = 1 [(buf.validate.field).uint64.gt = 0];
}

message RequestSourceError {
  string message = 1;
}

service HelloService {
  rpc Hello(HelloRequest) returns (HelloResponse);
}

message HelloRequest {
  string name = 1;
}

message HelloResponse {
  string message = 1;
  RequestSource source = 2;
}
