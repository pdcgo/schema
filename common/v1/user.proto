syntax = "proto3";
package common.v1;

import "buf/validate/validate.proto";
import "common/v1/common.proto";

option go_package = "github.com/pdcgo/schema/services/common/v1;common";

service LoginService {
  rpc Login(LoginRequest) returns (LoginResponse);
}

message LoginRequest {
  string username = 1;
  string password = 2;
}

message LoginResponse {
  User user = 1;
  string token = 2;
}

service UserService {
  /*
   #### Untuk Get Data User Public
  */
  rpc PublicUserIDs(PublicUserIDsRequest) returns (PublicUserIDsResponse);
}

message PublicUserIDsRequest {
  repeated uint64 ids = 1 [(buf.validate.field).repeated = {
    min_items: 1 // must have at least 1 id
    max_items: 200
    unique: true // no duplicate IDs allowed
    items: {
      uint64: {gt: 0}
    }
  }];
}

message PublicUserIDsResponse {
  map<uint64, User> data = 1;
}
