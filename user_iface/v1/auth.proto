syntax = "proto3";
package user_iface.v1;

// import "common/v1/common.proto";
import "access_iface/v1/api.proto";
import "buf/validate/validate.proto";

option go_package = "github.com/pdcgo/schema/services/user_iface/v1;user_iface";

service AuthService {
  rpc Login(LoginRequest) returns (LoginResponse);
  rpc Logout(LogoutRequest) returns (LogoutResponse);
}

message User {
  uint64 id = 1;
  string name = 2;
  string username = 3;
  string profile_picture = 4;
}

message Team {
  uint64 id = 1;
  string name = 2;
}

message LoginRequest {
  string username = 1 [(buf.validate.field).string = {
    min_len: 1
    max_len: 100
  }];
  string password = 2 [(buf.validate.field).string = {
    min_len: 1
    max_len: 100
  }];
  access_iface.v1.RequestFrom from = 3 [(buf.validate.field).enum = {
    defined_only: true
    not_in: [0]
  }];

  uint64 team_id = 4;
}

message LoginResponse {
  User user = 1;
  string token = 2;
  string x_pdc_source = 3;
  Team team = 4;
}

message LogoutRequest {}

message LogoutResponse {}
