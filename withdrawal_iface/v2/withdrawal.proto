syntax = "proto3";
package withdrawal_iface.v2;

import "buf/validate/validate.proto";
import "common/v1/common.proto";
import "withdrawal_iface/v1/withdrawal.proto";

option go_package = "github.com/pdcgo/schema/services/withdrawal_iface/v2;withdrawal_iface";

service WithdrawalService {
  rpc SubmitWithdrawal(SubmitWithdrawalRequest) returns (stream SubmitWithdrawalResponse);
}

message SubmitWithdrawalRequest {
  uint64 team_id = 1 [(buf.validate.field).uint64.gt = 0];
  uint64 mp_id = 2 [(buf.validate.field).uint64.gt = 0];
  withdrawal_iface.v1.ImporterSource source = 3 [(buf.validate.field).enum.defined_only = true];
  common.v1.MarketplaceType mp_type = 4 [(buf.validate.field).enum.defined_only = true];
  string resource_uri = 5 [(buf.validate.field).string.min_len = 1];
}

message SubmitWithdrawalResponse {
  string message = 1;
}
